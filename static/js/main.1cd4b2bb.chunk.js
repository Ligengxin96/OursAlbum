(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{276:function(e,t){},278:function(e,t){},288:function(e,t){},290:function(e,t){},317:function(e,t){},318:function(e,t){},323:function(e,t){},325:function(e,t){},332:function(e,t){},351:function(e,t){},427:function(e,t,n){},446:function(e,t,n){},447:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(16),c=n.n(r),o=n(242),s=n(86),i=n(11),l="END_LOADING",u="START_LOADING",d="CREATE",p="UPDATE",j="DELETE",b="FETCH_ALL",f="FETCH_ONE",m="LOGIN",h="LOGOUT",g="REGISTER",O={post:null,posts:[],pagination:{currentPage:1},isLoading:!1},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0,n=e.posts,a=t.payload||{},r=a.data,c=a.pagination;switch(t.type){case u:return Object(i.a)(Object(i.a)({},e),{},{isLoading:!0});case l:return Object(i.a)(Object(i.a)({},e),{},{isLoading:!1});case f:return Object(i.a)(Object(i.a)({},e),{},{post:r[0]});case b:return Object(i.a)(Object(i.a)({},e),{},{posts:r,pagination:c});case d:return Object(i.a)(Object(i.a)({},e),{},{posts:n.concat(r)});case p:var o=r[0];return Object(i.a)(Object(i.a)({},e),{},{posts:n.map((function(e){return e._id===o._id?o:e}))});case j:var s=r[0];return Object(i.a)(Object(i.a)({},e),{},{posts:n.filter((function(e){return e._id!==s._id}))});default:return e}},v={data:null},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return localStorage.setItem("userInfo",JSON.stringify(t.payload)),{data:t.payload};case h:return localStorage.removeItem("userInfo"),{data:t.payload};case g:return localStorage.setItem("userInfo",JSON.stringify(t.payload)),{data:t.payload};default:return e}},w=Object(s.b)({posts:x,authorize:y}),N=n(18),C=n(482),S=n(42),I=n(20),k=n(17),E=n(473),P=n(452),T=n(474),B=n(489),R=n(475),_=n(243),L=n(56),A=n.n(L),D=function(e){var t="";if(!e)return t;try{var n=A.a.enc.Utf8.parse(e);(t=A.a.enc.Base64.stringify(n)).indexOf("/")&&(t=t.replace(/\/+/g,"%2F"))}catch(a){console.error("Base65 encode string failed with error: ".concat(a.message))}return t},F=n.p+"static/media/us.9cfa8a46.png",U=n(470),W=n(472),J=Object(U.a)((function(e){return{appBar:{borderRadius:15,margin:"30px 0",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:"10px 50px"},heading:{color:"rgba(0,183,255, 1)",textDecoration:"none"},image:{marginLeft:"15px"},toolbar:{display:"flex",justifyContent:"flex-end",width:"400px"},profile:{display:"flex",justifyContent:"space-between",width:"250px"},userName:{display:"flex",alignItems:"center"},brandContainer:{display:"flex",alignItems:"center"},purple:{color:e.palette.getContrastText(W.a[500]),backgroundColor:W.a[500]}}})),z=n(2),G=function(){var e=J(),t=Object(I.h)(),n=Object(N.b)(),r=JSON.parse(localStorage.getItem("userInfo")),c=Object(a.useState)(r),o=Object(k.a)(c,2),s=o[0],i=o[1],l=function(e){n({type:h,payload:null}),i(null),window.location=e?"/login/".concat(e):"/login"};return Object(a.useEffect)((function(){var e=null===s||void 0===s?void 0:s.token;if(e&&1e3*Object(_.a)(e).exp<(new Date).getTime()){var t=D(JSON.stringify({error:403}));l(t)}i(r)}),[t.pathname]),Object(z.jsxs)(E.a,{className:e.appBar,position:"static",color:"inherit",children:[Object(z.jsxs)("div",{className:e.brandContainer,children:[Object(z.jsx)(P.a,{component:S.b,to:"/",className:e.heading,variant:"h2",align:"center",children:"Ours Album"}),Object(z.jsx)("img",{className:e.image,src:F,alt:"icon",height:"60"})]}),Object(z.jsx)(T.a,{className:e.toolbar,children:s?Object(z.jsxs)("div",{className:e.profile,children:[Object(z.jsx)(B.a,{className:e.purple,alt:s.name,src:s.imageUrl,children:s.name.toUpperCase().charAt(0)}),Object(z.jsx)(P.a,{className:e.userName,variant:"h6",children:s.name}),Object(z.jsx)(R.a,{onClick:function(){return l()},variant:"contained",className:e.logout,color:"secondary",children:"Logout"})]}):Object(z.jsx)(R.a,{component:S.b,to:"/login",variant:"contained",color:"primary",children:"Login"})})]})},M=n(117),H=n.n(M),V=n(488),X=n(481),Y=n(486),q=n(258),K=n(480),Q=n(14),Z=n.n(Q),$=n(24),ee=n(476),te=n(260),ne=n(477),ae=n(478),re=n(479),ce=n(250),oe=n.n(ce),se=n(251),ie=n.n(se),le=n(249),ue=n.n(le),de=n(119),pe=n.n(de),je=n(94),be=n.n(je),fe=(n(427),be.a.mixin({customClass:{confirmButton:"btn btn-danger",cancelButton:"btn btn-success"}})),me=n(248),he="/v1/post",ge="/v1/user",Oe=n.n(me).a.create({baseURL:"http://23.224.182.82:5000"});Oe.interceptors.request.use((function(e){var t=JSON.parse(localStorage.getItem("userInfo"));return(null===t||void 0===t?void 0:t.token)&&(e.headers.Authorization="Bearer ".concat(t.token)),e})),Oe.interceptors.response.use((function(e){return e}),(function(e){if(403===e.response.status){var t=D(JSON.stringify({error:403}));localStorage.removeItem("userInfo"),window.location="/login/".concat(t)}return Promise.reject(e)}));var xe,ve=function(e,t,n){return Oe.get("".concat(he,"/?title=").concat(e,"&tags=").concat(t.join(","),"&currentPage=").concat(n))},ye=function(e){return Oe.get("".concat(he,"/").concat(e))},we=function(e){return Oe.post("".concat(he),e)},Ne=function(e,t){return Oe.patch("".concat(he,"/").concat(e),t)},Ce=function(e){return Oe.patch("".concat(he,"/likepost/").concat(e))},Se=function(e){return Oe.delete("".concat(he,"/").concat(e))},Ie=function(e,t){return Oe.post("".concat(he,"/comment"),{id:e,comment:t})},ke=function(e){return Oe.post("".concat(ge,"/login"),e)},Ee=function(e){return Oe.post("".concat(ge,"/register"),e)},Pe=n(21),Te=(xe={},Object(Pe.a)(xe,"SERVER_UNKNOWN_ERROR","Something went wrong, please try laster"),Object(Pe.a)(xe,"UNAUTH","User not auth, please login"),Object(Pe.a)(xe,"USER_EXIST","User already exist"),Object(Pe.a)(xe,"USER_NOT_EXIST","User not exist"),Object(Pe.a)(xe,"INCORRECT_USERNAME_OR_PASSWORD","Username or password error"),Object(Pe.a)(xe,"POST_EXIST","Post already exist"),Object(Pe.a)(xe,"POST_NOT_EXIST","Post not exist"),xe),Be=be.a.mixin({icon:"error",toast:!0,position:"top",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,width:"500"}),Re=be.a.mixin({icon:"success",toast:!0,position:"top",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,width:"500"}),_e=function(e){var t=Te[e]||e;Be.fire(t)},Le=function(e){Re.fire(e)},Ae=function(e,t,n){return function(){var a=Object($.a)(Z.a.mark((function a(r){var c,o;return Z.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r({type:u}),a.next=4,ve(e,t,n);case 4:c=a.sent,o=c.data,r({type:b,payload:o}),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),a.t0.response&&_e(a.t0.response.data.errorCode),console.log("Error occurrence when fetch all posts with error:",a.t0.message);case 13:return a.prev=13,r({type:l}),a.finish(13);case 16:case"end":return a.stop()}}),a,null,[[0,9,13,16]])})));return function(e){return a.apply(this,arguments)}}()},De=function(e){return function(){var t=Object($.a)(Z.a.mark((function t(n){var a,r;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,we(e);case 3:a=t.sent,r=a.data,n({type:d,payload:r}),Le("Create post success"),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),t.t0.response&&_e(t.t0.response.data.errorCode),console.log("Error occurrence when create post with error:",t.t0.message);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},Fe=function(e,t){return function(){var n=Object($.a)(Z.a.mark((function n(a){var r,c;return Z.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Ne(e,t);case 3:r=n.sent,c=r.data,a({type:p,payload:c}),Le("Update post success"),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),n.t0.response&&_e(n.t0.response.data.errorCode),console.log("Error occurrence when update post with error:",n.t0.message);case 13:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()},Ue=function(e){return function(){var t=Object($.a)(Z.a.mark((function t(n){var a,r;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Se(e);case 3:a=t.sent,r=a.data,n({type:j,payload:r}),Le("Delete post success"),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),t.t0.response&&_e(t.t0.response.data.errorCode),console.log("Error occurrence when delete post with error:",t.t0.message);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},We=function(e,t){return function(){var n=Object($.a)(Z.a.mark((function n(a){var r,c;return Z.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Ie(e,t);case 3:return r=n.sent,c=r.data,a({type:p,payload:c}),n.abrupt("return",c.data[0].comments);case 9:n.prev=9,n.t0=n.catch(0),n.t0.response&&_e(n.t0.response.data.errorCode),console.log("Error occurrence when Comment post with error:",n.t0.message);case 13:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()},Je=function(e,t){if("string"!==typeof e)throw new Error("str is not a String");if("number"!==typeof t)throw new Error("length is not a Number");return t=escape(e).indexOf("%u")<0?t:t/2,e.length>t&&(e=e.substring(0,t)+"..."),e},ze=n.p+"static/media/null.09cb794a.png",Ge=Object(U.a)({media:{height:0,paddingTop:"56.25%",backgroundColor:"rgba(0, 0, 0, 0.5)",backgroundBlendMode:"darken"},border:{border:"solid"},fullHeightCard:{height:"100%"},card:{display:"flex",flexDirection:"column",justifyContent:"space-between",borderRadius:"15px",height:"420px",position:"relative"},overlayLeft:{position:"absolute",top:"20px",left:"20px",color:"white"},overlayRight:{position:"absolute",top:"20px",right:"20px",color:"white"},grid:{display:"flex"},details:{display:"flex",justifyContent:"space-between",margin:"20px"},title:{padding:"0 16px"},cardActions:{padding:"0 16px 8px 16px",display:"flex",justifyContent:"space-between"},likes:{paddingLeft:"3px"},cardAction:{display:"block",textAlign:"initial"}}),Me=function(e){var t=e.post,n=e.setEditingPostId,r=JSON.parse(localStorage.getItem("userInfo")),c=(null===r||void 0===r?void 0:r.googleId)||(null===r||void 0===r?void 0:r.id),o=Ge(),s=Object(I.g)(),i=Object(N.b)(),l=Object(a.useState)(t.likes),u=Object(k.a)(l,2),d=u[0],j=u[1],b=function(){var e=Object($.a)(Z.a.mark((function e(){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe.fire({title:"Are you sure for delete?",text:"You won't be able to revert this, the post will be permanently lost!",icon:"warning",showCancelButton:!0,confirmButtonText:"delete",cancelButtonText:"cancel",reverseButtons:!0});case 2:e.sent.isConfirmed&&i(Ue(t._id));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(z.jsx)("div",{children:Object(z.jsxs)(ee.a,{className:o.card,children:[Object(z.jsxs)(te.a,{component:"span",className:o.cardAction,onClick:function(){s.push("/posts/".concat(t._id))},children:[Object(z.jsx)(ne.a,{className:o.media,title:t.title,image:t.selectedFile||ze}),Object(z.jsxs)("div",{className:o.overlayLeft,children:[Object(z.jsx)(P.a,{variant:"h6",children:t.creator}),Object(z.jsx)(P.a,{variant:"body2",children:pe()(t.createdTime).fromNow()})]}),Object(z.jsx)("div",{className:o.overlayRight,children:c&&t.creatorId===c&&Object(z.jsx)(R.a,{style:{color:"white"},size:"small",onClick:function(e){e.stopPropagation(),n(t._id)},children:Object(z.jsx)(ue.a,{fontSize:"default"})})}),Object(z.jsx)("div",{className:o.details,children:Object(z.jsx)(P.a,{variant:"body2",color:"textSecondary",component:"h2",children:t.tags.map((function(e){return"#".concat(e," ")}))})}),Object(z.jsx)(P.a,{className:o.title,gutterBottom:!0,variant:"h5",component:"h2",title:t.title,children:Je(t.title,20)}),Object(z.jsx)(ae.a,{children:Object(z.jsx)(P.a,{variant:"body2",color:"textSecondary",component:"p",title:t.message,children:Je(t.message,90)})})]}),Object(z.jsxs)(re.a,{className:o.cardActions,children:[Object(z.jsxs)(R.a,{size:"small",color:"primary",disabled:null==c,onClick:function(){var e;i((e=t._id,function(){var t=Object($.a)(Z.a.mark((function t(n){var a,r;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ce(e);case 3:a=t.sent,r=a.data,n({type:p,payload:r}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),t.t0.response&&_e(t.t0.response.data.errorCode),console.log("Error occurrence when like post with error:",t.t0.message);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}())),d.includes(c)?j(d.filter((function(e){return c!==e}))):j(d.concat(c))},children:[Object(z.jsx)(oe.a,{fontSize:"small"}),Object(z.jsx)("span",{className:o.likes,children:d.length})]}),c&&t.creatorId===c&&Object(z.jsx)(R.a,{size:"small",color:"secondary",onClick:b,children:Object(z.jsx)(ie.a,{fontSize:"small"})})]})]})})},He=Object(U.a)((function(e){return{mainContainer:{display:"flex",alignItems:"center"},smMargin:{margin:e.spacing(1)},actionDiv:{textAlign:"center"},loadingPaper:{display:"flex",justifyContent:"center",alignItems:"center",padding:"20px",borderRadius:"15px",height:"90%"},emptyPaper:{display:"flex",justifyContent:"center",alignItems:"center",padding:"20px",borderRadius:"15px",height:"90%"}}})),Ve=function(e){var t=e.setEditingPostId,n=Object(N.c)((function(e){return e.posts})),a=n.posts,r=n.isLoading,c=He();return r?Object(z.jsx)(q.a,{elevation:6,className:c.loadingPaper,children:Object(z.jsx)(K.a,{size:"7rem"})}):0===a.length?Object(z.jsx)(q.a,{elevation:6,className:c.emptyPaper,children:Object(z.jsx)("h1",{children:"No posts found"})}):Object(z.jsx)("div",{children:Object(z.jsx)(X.a,{className:c.container,container:!0,alignItems:"stretch",spacing:3,children:a.map((function(e,n){return Object(z.jsx)(X.a,{item:!0,xs:12,sm:12,md:6,lg:3,children:Object(z.jsx)(Me,{post:e,setEditingPostId:t})},n)}))})})},Xe=n(252),Ye=n.n(Xe),qe=Object(U.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1)}},paper:{padding:e.spacing(2)},form:{display:"flex",flexWrap:"wrap",justifyContent:"center"},filedInput:{width:"100%",margin:"10px 0"},buttonSubmit:{marginBottom:10},chipInput:{width:"96%",padding:"5px 0"}}})),Ke=[{name:"title",label:"Title"},{name:"message",label:"Description",multiline:!0,rows:4}],Qe=function(e){var t=e.id,n=e.setEditingPostId,r=qe(),c=Object(a.useRef)(),o=Object(N.b)(),s=Object(N.c)((function(e){return e.posts.posts.find((function(e){return e._id===t}))})),l=JSON.parse(localStorage.getItem("userInfo")),u=Object(a.useState)({creator:null===l||void 0===l?void 0:l.name,creatorId:null===l||void 0===l?void 0:l.id,title:"",message:"",tags:[],selectedFile:""}),d=Object(k.a)(u,2),p=d[0],j=d[1],b=function(){j({title:"",message:"",tags:[],selectedFile:""}),n(null),c.current.reset()},f=function(){var e=Object($.a)(Z.a.mark((function e(n){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),o(t?Fe(t,p):De(p)),b();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){s&&j(s)}),[s]),(null===l||void 0===l?void 0:l.name)?Object(z.jsx)(q.a,{className:r.paper,children:Object(z.jsxs)("form",{autoComplete:"off",noValidate:!0,className:"".concat(r.root," ").concat(r.form),onSubmit:f,ref:c,children:[Object(z.jsx)(P.a,{variant:"h6",children:"".concat(t?"Update":"Create"," Post")}),Ke.map((function(e){var t=e.name,n=e.label,a=e.multiline,r=void 0!==a&&a,c=e.rows;return Object(z.jsx)(Y.a,{value:p[t],onChange:function(e){return function(e,t){j("tags"===t?Object(i.a)(Object(i.a)({},p),{},Object(Pe.a)({},t,e.target.value.split(","))):Object(i.a)(Object(i.a)({},p),{},Object(Pe.a)({},t,e.target.value)))}(e,t)},name:t,label:n,multiline:r,rows:c,variant:"outlined",fullWidth:!0},t)})),Object(z.jsx)("div",{className:r.chipInput,children:Object(z.jsx)(H.a,{name:"tags",label:"Tag",variant:"outlined",fullWidth:!0,value:p.tags,onAdd:function(e){return function(e){j(Object(i.a)(Object(i.a)({},p),{},{tags:p.tags.concat(e)}))}(e)},onDelete:function(e){return t=e,void j(Object(i.a)(Object(i.a)({},p),{},{tags:p.tags.filter((function(e){return e!==t}))}));var t}})}),Object(z.jsx)("div",{className:r.filedInput,children:Object(z.jsx)(Ye.a,{onDone:function(e){j(Object(i.a)(Object(i.a)({},p),{},{selectedFile:e.base64}))}})}),Object(z.jsx)(R.a,{className:r.buttonSubmit,variant:"contained",color:"primary",size:"large",type:"submit",fullWidth:!0,children:"Submit"}),Object(z.jsx)(R.a,{variant:"contained",color:"secondary",size:"small",fullWidth:!0,onClick:b,children:"clear"})]})}):Object(z.jsx)(q.a,{className:r.paper,children:Object(z.jsx)(P.a,{variant:"h6",align:"center",children:"Login for create or like a post"})})},Ze=n(490),$e=n(487),et=Object(U.a)((function(){return{ul:{justifyContent:"space-around"}}})),tt=function(e){var t=e.title,n=e.tags,a=e.currentPage,r=e.setCurrentPage,c=et(),o=Object(N.c)((function(e){return e.posts})).pagination;return Object(z.jsx)(Ze.a,{classes:{ul:c.ul},count:o.maxPage,page:a,variant:"outlined",color:"primary",onChange:function(e,t){r(t)},renderItem:function(e){return Object(z.jsx)($e.a,Object(i.a)(Object(i.a)({},e),{},{component:S.b,to:"/posts?title=".concat(t,"&tags=").concat(n.join(","),"&currentPage=").concat(e.page)}))}})},nt=Object(U.a)((function(e){return{appBarSearch:{borderRadius:4,marginBottom:"1rem",display:"flex",padding:"16px"},pagination:{borderRadius:4,marginTop:"1rem",padding:"16px"},chipInput:{margin:"10px 0"},gridContainer:Object(Pe.a)({},e.breakpoints.down("xs"),{flexDirection:"column-reverse"})}})),at=function(){var e=nt(),t=Object(I.g)(),n=Object(N.b)(),r=new URLSearchParams(Object(I.h)().search),c=Object(a.useState)(!1),o=Object(k.a)(c,2),s=o[0],i=o[1],l=Object(a.useState)(Number(r.get("currentPage"))||1),u=Object(k.a)(l,2),d=u[0],p=u[1],j=Object(a.useState)(null),b=Object(k.a)(j,2),f=b[0],m=b[1],h=Object(a.useState)(""),g=Object(k.a)(h,2),O=g[0],x=g[1],v=Object(a.useState)([]),y=Object(k.a)(v,2),w=y[0],S=y[1],P=function(e){13===e.keyCode&&(O.trim()||w.length>0?(t.push("/posts?title=".concat(O,"&tags=").concat(w.join(","),"&currentPage=",1)),p(1),i(!s)):t.push("/"))};return Object(a.useEffect)((function(){n(Ae(O,w,d))}),[s,d]),Object(z.jsx)(V.a,{in:!0,children:Object(z.jsx)(C.a,{maxWidth:"xl",children:Object(z.jsxs)(X.a,{container:!0,justify:"space-between",alignItems:"stretch",spacing:3,className:e.gridContainer,children:[Object(z.jsx)(X.a,{item:!0,xs:12,md:9,sm:6,children:Object(z.jsx)(Ve,{setEditingPostId:m})}),Object(z.jsxs)(X.a,{item:!0,xs:12,sm:6,md:3,children:[Object(z.jsxs)(E.a,{className:e.appBarSearch,position:"static",color:"inherit",children:[Object(z.jsx)(Y.a,{onKeyDown:P,value:O,onChange:function(e){x(e.target.value)},name:"search",variant:"outlined",label:"Title",fullWidth:!0}),Object(z.jsx)(H.a,{className:e.chipInput,value:w,onAdd:function(e){return function(e){S(w.concat(e))}(e)},onDelete:function(e){return t=e,void S(w.filter((function(e){return e!==t})));var t},label:"Tag",variant:"outlined"}),Object(z.jsx)(R.a,{className:e.searchButton,variant:"contained",color:"primary",onClick:function(){return P({keyCode:13})},children:"Search"})]}),Object(z.jsx)(Qe,{id:f,setEditingPostId:m}),Object(z.jsx)(q.a,{className:e.pagination,elevation:6,children:Object(z.jsx)(tt,{title:O,tags:w,currentPage:d,setCurrentPage:p})})]})]})})})},rt=n(256),ct=n.n(rt),ot=n(253),st=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(a.useState)(e),n=Object(k.a)(t,2),r=n[0],c=n[1],o=function(){return c(e)},s=function(e){var t=e.target;c(Object(i.a)(Object(i.a)({},r),{},Object(Pe.a)({},t.name,t.value)))};return[r,s,o]},it=n(483),lt=n(484),ut=n(254),dt=n.n(ut),pt=n(255),jt=n.n(pt),bt=function(e){var t=e.name,n=e.value,a=e.handleChange,r=e.label,c=e.half,o=e.autoFocus,s=e.type,i=e.handleShowPassword,l=e.errorText;return Object(z.jsx)(X.a,{item:!0,xs:12,sm:c?6:12,children:Object(z.jsx)(Y.a,{value:n,name:t,onChange:a,variant:"outlined",required:!0,fullWidth:!0,label:r,autoFocus:o,type:s,error:l,helperText:l,InputProps:"password"===t?{endAdornment:Object(z.jsx)(it.a,{position:"end",children:Object(z.jsx)(lt.a,{onClick:i,children:"password"===s?Object(z.jsx)(dt.a,{}):Object(z.jsx)(jt.a,{})})})}:null})})},ft=function(){return Object(z.jsxs)("svg",{t:"1625061488031",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3063",width:"20",height:"20",children:[Object(z.jsx)("path",{d:"M214.101333 512c0-32.512 5.546667-63.701333 15.36-92.928L57.173333 290.218667A491.861333 491.861333 0 0 0 4.693333 512c0 79.701333 18.858667 154.88 52.394667 221.610667l172.202667-129.066667A290.56 290.56 0 0 1 214.101333 512",fill:"#FBBC05","p-id":"3064"}),Object(z.jsx)("path",{d:"M516.693333 216.192c72.106667 0 137.258667 25.002667 188.458667 65.962667L854.101333 136.533333C763.349333 59.178667 646.997333 11.392 516.693333 11.392c-202.325333 0-376.234667 113.28-459.52 278.826667l172.373334 128.853333c39.68-118.016 152.832-202.88 287.146666-202.88",fill:"#EA4335","p-id":"3065"}),Object(z.jsx)("path",{d:"M516.693333 807.808c-134.357333 0-247.509333-84.864-287.232-202.88l-172.288 128.853333c83.242667 165.546667 257.152 278.826667 459.52 278.826667 124.842667 0 244.053333-43.392 333.568-124.757333l-163.584-123.818667c-46.122667 28.458667-104.234667 43.776-170.026666 43.776",fill:"#34A853","p-id":"3066"}),Object(z.jsx)("path",{d:"M1005.397333 512c0-29.568-4.693333-61.44-11.648-91.008H516.650667V614.4h274.602666c-13.696 65.962667-51.072 116.650667-104.533333 149.632l163.541333 123.818667c93.994667-85.418667 155.136-212.650667 155.136-375.850667",fill:"#4285F4","p-id":"3067"})]})},mt=Object(U.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",padding:e.spacing(2)},root:{"& .MuiTextField-root":{margin:e.spacing(1)}},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},googleButton:{marginBottom:e.spacing(2)}}})),ht=Object(I.j)((function(){var e=Object(I.i)().info,t=null;e&&(t=JSON.parse(function(e){var n="";if(!e)return n;try{var a=e;a.indexOf("%2F")&&(a=a.replace(/(%2F)+/g,"/")),n=A.a.enc.Base64.parse(a).toString(A.a.enc.Utf8)}catch(t){console.error("Decode string failed with error: ".concat(t.message))}return n}(e)).error);var n=mt(),r=Object(N.b)(),c=Object(I.g)(),o=Object(a.useRef)(),s=Object(a.useState)(!1),l=Object(k.a)(s,2),u=l[0],d=l[1],p=Object(a.useState)(!1),j=Object(k.a)(p,2),b=j[0],f=j[1],h=Object(a.useState)(!!t),O=Object(k.a)(h,2),x=O[0],v=O[1],y=Object(a.useState)(null),w=Object(k.a)(y,2),S=w[0],E=w[1],T=st({firstName:"",lastName:"",email:"useThisAccountOrGoogleAccount@login",password:"TomAndJerry",confirmPassword:""}),_=Object(k.a)(T,2),L=_[0],F=_[1],U=function(){var e=Object($.a)(Z.a.mark((function e(t){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v(!1),r({type:m,payload:Object(i.a)(Object(i.a)({},t.profileObj),{},{token:t.tokenId})}),c.push("/"),Le("Google account login Success");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){x&&_e("Certification expired, please login again")}),[x]),Object(z.jsx)(C.a,{component:"main",maxWidth:"xs",children:Object(z.jsxs)(q.a,{className:n.paper,elevation:6,children:[Object(z.jsx)(B.a,{className:n.avatar,children:Object(z.jsx)(ct.a,{})}),Object(z.jsx)(P.a,{component:"h1",variant:"h5",children:u?"Register":"Login"}),Object(z.jsxs)("form",{className:n.form,onSubmit:function(e){e.preventDefault();var t=D(L.password);if(u){if(L.password!==L.confirmPassword)return void E("Passwords doesn't match");r(function(e,t){return function(){var n=Object($.a)(Z.a.mark((function n(a){var r,c,o;return Z.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Ee(e);case 3:c=n.sent,o=c.data,a({type:g,payload:o.userInfo}),t.push("/"),Le("Welcome ".concat(null===o||void 0===o||null===(r=o.userInfo)||void 0===r?void 0:r.name)),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(0),n.t0.response&&_e(n.t0.response.data.errorCode),console.error("Register failed with error: ".concat(n.t0.message));case 14:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()}(Object(i.a)(Object(i.a)({},L),{},{password:t}),c))}else r(function(e,t){return function(){var n=Object($.a)(Z.a.mark((function n(a){var r,c,o;return Z.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,ke(e);case 3:c=n.sent,o=c.data,a({type:m,payload:o.userInfo}),t.push("/"),Le("Welcome ".concat(null===o||void 0===o||null===(r=o.userInfo)||void 0===r?void 0:r.name)),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(0),n.t0.response&&_e(n.t0.response.data.errorCode),console.error("Login failed with error: ".concat(n.t0.message));case 14:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()}(Object(i.a)(Object(i.a)({},L),{},{password:t}),c))},ref:o,children:[Object(z.jsxs)(X.a,{container:!0,spacing:2,children:[u&&Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(bt,{handleChange:F,name:"firstName",label:"firstName",autoFocus:!0,half:!0}),Object(z.jsx)(bt,{handleChange:F,name:"lastName",label:"lastName",half:!0})]}),Object(z.jsx)(bt,{handleChange:F,value:L.email,name:"email",label:"email",type:"email"}),Object(z.jsx)(bt,{handleChange:F,value:L.password,handleShowPassword:function(){return f(!b)},name:"password",label:"password",type:b?"text":"password"}),u&&Object(z.jsx)(bt,{handleChange:F,name:"confirmPassword",label:"confirmPassword",type:"password",errorText:S})]}),Object(z.jsx)(R.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:n.submit,children:u?"Register":"Login"}),Object(z.jsx)(ot.GoogleLogin,{clientId:"160069951274-9lk4icl4nvv4lbb61umon883c3rb6dtf.apps.googleusercontent.com",render:function(e){return Object(z.jsx)(R.a,{onClick:e.onClick,disabled:e.disabled,className:n.googleButton,fullWidth:!0,color:"primary",startIcon:Object(z.jsx)(ft,{}),variant:"contained",children:"Google Account Login"})},onSuccess:U,onFailure:function(e){"popup_closed_by_user"!==e.error&&(_e("Google account login failed"),console.error("Google account login failed with error: ".concat(JSON.stringify(e))))},cookiePolicy:"single_host_origin"}),Object(z.jsx)(X.a,{container:!0,justify:"flex-end",children:Object(z.jsx)(X.a,{item:!0,children:Object(z.jsx)(R.a,{style:{textTransform:"none"},onClick:function(){f(!1),d((function(e){return!e})),o.current.reset()},children:u?"Already have an account? Login":"Don't have an account? Register"})})})]})]})})})),gt=n(485),Ot=Object(U.a)((function(e){return{media:{borderRadius:"20px",objectFit:"cover",width:"100%",maxHeight:"600px"},paper:{padding:"20px",borderRadius:"15px"},card:Object(Pe.a)({display:"flex",width:"100%"},e.breakpoints.down("sm"),{flexWrap:"wrap",flexDirection:"column"}),section:{borderRadius:"20px",margin:"10px",flex:1},imageSection:Object(Pe.a)({marginLeft:"20px",width:"60%"},e.breakpoints.down("sm"),{marginLeft:0}),recommendedPosts:Object(Pe.a)({display:"flex"},e.breakpoints.down("sm"),{flexDirection:"column"}),recommendedPost:{margin:"10px",width:"25%",cursor:"pointer"},loadingPaper:{display:"flex",justifyContent:"center",alignItems:"center",padding:"20px",borderRadius:"15px",height:"39vh"},divider:{margin:"20px 0"},img:{width:"200px"},commentsOuterContainer:{display:"flex",justifyContent:"space-between"},commentsInnerContainer:{height:"200px",overflowY:"auto",marginRight:"30px",width:"70%"}}})),xt=function(e){var t=e.post,n=e.user,r=Ot(),c=Object(N.b)(),o=Object(a.useRef)(),s=Object(a.useState)(""),i=Object(k.a)(s,2),l=i[0],u=i[1],d=Object(a.useState)(null===t||void 0===t?void 0:t.comments),p=Object(k.a)(d,2),j=p[0],b=p[1],f=function(){var e=Object($.a)(Z.a.mark((function e(){var a;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(We(t._id,"".concat(null===n||void 0===n?void 0:n.name,": ").concat(l)));case 2:a=e.sent,u(""),b(a),o.current.scrollIntoView({behavior:"smooth"});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(z.jsx)("div",{children:Object(z.jsxs)("div",{className:r.commentsOuterContainer,children:[Object(z.jsxs)("div",{className:r.commentsInnerContainer,children:[Object(z.jsx)(P.a,{gutterBottom:!0,variant:"h6",children:"Comments"}),j.map((function(e,t){var n=e.split(": "),a=Object(k.a)(n,2),r=a[0],c=a[1];return Object(z.jsxs)(P.a,{gutterBottom:!0,variant:"subtitle1",children:[Object(z.jsxs)("strong",{title:"".concat(r,": ").concat(c),children:[r,": "]}),c]},t)})),Object(z.jsx)("div",{ref:o})]}),Object(z.jsxs)("div",{style:{width:"70%"},children:[Object(z.jsx)(P.a,{gutterBottom:!0,variant:"h6",children:"Leave a comment"}),Object(z.jsx)(Y.a,{fullWidth:!0,rows:4,variant:"outlined",label:"Comment",multiline:!0,value:l,onChange:function(e){return u(e.target.value)}}),Object(z.jsx)("br",{}),Object(z.jsx)(R.a,{style:{marginTop:"10px"},fullWidth:!0,disabled:0===l.length,color:"primary",variant:"contained",onClick:f,children:"Submit"})]})]})})},vt=function(){var e=Object(I.i)().id,t=Ot(),n=Object(I.g)(),r=Object(N.b)(),c=JSON.parse(localStorage.getItem("userInfo")),o=Object(N.c)((function(e){return e.posts})),s=o.post,i=o.posts,d=o.isLoading;if(Object(a.useEffect)((function(){r(function(e){return function(){var t=Object($.a)(Z.a.mark((function t(n){var a,r;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:u}),t.next=4,ye(e);case 4:a=t.sent,r=a.data,n({type:f,payload:r}),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),t.t0.response&&_e(t.t0.response.data.errorCode),console.log("Error occurrence when fetch all posts with error:",t.t0.message);case 13:return t.prev=13,n({type:l}),t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[0,9,13,16]])})));return function(e){return t.apply(this,arguments)}}()}(e))}),[r,e]),Object(a.useEffect)((function(){s&&r(Ae("",s.tags,1))}),[r,s]),!s)return null;if(d)return Object(z.jsx)(q.a,{elevation:6,className:t.loadingPaper,children:Object(z.jsx)(K.a,{size:"7rem"})});var p=i.filter((function(e){return e._id!==s._id}));return Object(z.jsxs)(q.a,{className:t.paper,elevation:6,children:[Object(z.jsxs)("div",{className:t.card,children:[Object(z.jsxs)("div",{className:t.section,children:[Object(z.jsx)(P.a,{variant:"h3",component:"h2",children:s.title}),Object(z.jsx)(P.a,{gutterBottom:!0,variant:"h6",color:"textSecondary",component:"h2",children:s.tags.map((function(e){return"#".concat(e)}))}),Object(z.jsx)(P.a,{gutterBottom:!0,variant:"body1",component:"p",children:s.message}),Object(z.jsxs)(P.a,{variant:"h6",children:["Created by: ",s.creator]}),Object(z.jsx)(P.a,{variant:"body1",children:pe()(s.createdTime).fromNow()}),Object(z.jsx)(gt.a,{className:t.divider}),c&&Object(z.jsx)(xt,{user:c,post:s}),Object(z.jsx)(gt.a,{className:t.divider})]}),Object(z.jsx)("div",{className:t.imageSection,children:Object(z.jsx)("img",{className:t.media,src:s.selectedFile||ze,alt:s.title})})]}),p.length>0&&Object(z.jsxs)("div",{className:t.section,children:[Object(z.jsx)(P.a,{gutterBottom:!0,variant:"h5",children:"You might also like:"}),Object(z.jsx)(gt.a,{}),Object(z.jsx)("div",{className:t.recommendedPosts,children:p.slice(0,4).map((function(e){var a=e._id,r=e.title,c=e.name,o=e.message,s=e.likes,i=e.selectedFile;return i&&Object(z.jsxs)("div",{className:t.recommendedPost,onClick:function(){return function(e){return n.push("/posts/".concat(e))}(a)},children:[Object(z.jsx)(P.a,{gutterBottom:!0,variant:"h6",title:r,children:Je(r,40)}),Object(z.jsx)(P.a,{gutterBottom:!0,variant:"subtitle2",title:c,children:c}),Object(z.jsx)(P.a,{gutterBottom:!0,variant:"subtitle2",title:o,children:Je(o,60)}),Object(z.jsxs)(P.a,{gutterBottom:!0,variant:"subtitle1",children:[s.length," people likes this post"]}),Object(z.jsx)("img",{className:t.img,src:i})]},a)}))})]})]})},yt=function(){var e=localStorage.getItem("userInfo");return Object(z.jsx)(S.a,{children:Object(z.jsxs)(C.a,{maxWidth:"xl",children:[Object(z.jsx)(G,{}),Object(z.jsxs)(I.d,{children:[Object(z.jsx)(I.b,{path:"/",exact:!0,component:function(){return Object(z.jsx)(I.a,{to:"/posts"})}}),Object(z.jsx)(I.b,{path:"/posts",exact:!0,component:at}),Object(z.jsx)(I.b,{path:"/posts/:id",exact:!0,component:vt}),Object(z.jsx)(I.b,{path:"/login",exact:!0,component:function(){return e?Object(z.jsx)(I.a,{to:"/posts"}):Object(z.jsx)(ht,{})}}),Object(z.jsx)(I.b,{path:"/login/:info",exact:!0,component:function(){return e?Object(z.jsx)(I.a,{to:"/posts"}):Object(z.jsx)(ht,{})}})]})]})})},wt=(n(446),Object(s.d)(w,Object(s.c)(Object(s.a)(o.a))));c.a.render(Object(z.jsx)(N.a,{store:wt,children:Object(z.jsx)(yt,{})}),document.getElementById("root"))}},[[447,1,2]]]);
//# sourceMappingURL=main.1cd4b2bb.chunk.js.map