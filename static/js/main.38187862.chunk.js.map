{"version":3,"sources":["constants/constantsType.js","reducers/posts.js","reducers/authorize.js","reducers/index.js","utils/crypto.js","images/us.png","components/Navbar/styles.js","components/Navbar/Navbar.js","components/Common/ConfirmDialog/ConfirmDialog.js","apis/index.js","config/errorMap.js","config/errorCode.js","components/Common/showMessage/showMessage.js","actions/posts.js","utils/compressionStr.js","images/null.png","components/Posts/Post/styles.js","components/Posts/Post/Post.js","components/Posts/styles.js","components/Posts/Posts.js","components/PostForm/styles.js","components/PostForm/PostForm.js","components/Common/Pagination/styles.js","components/Common/Pagination/Pagination.js","components/Home/styles.js","components/Home/Home.js","hooks/useForm.js","components/Authorize/Input/Input.js","components/Authorize/GoogleIcon/GoogleIcon.js","components/Authorize/styles.js","components/Authorize/Authorize.js","actions/authorize.js","components/PostDetail/styles.js","components/PostDetail/Comments/Comments.js","components/PostDetail/PostDetail.js","App.js","index.js"],"names":["END_LOADING","START_LOADING","CREATE","UPDATE","DELETE","FETCH_ALL","FETCH_ONE","LOGIN","LOGOUT","REGISTER","initState","post","posts","pagination","currentPage","isLoading","postsReducer","state","action","payload","data","type","concat","updatedPost","map","_id","deletedPost","filter","authorizeReducer","localStorage","setItem","JSON","stringify","removeItem","reducers","combineReducers","authorize","encodeBase64","str","encryptStr","words","CryptoJS","enc","Utf8","parse","Base64","indexOf","replace","error","console","message","makeStyles","theme","appBar","borderRadius","margin","display","flexDirection","justifyContent","alignItems","padding","heading","color","textDecoration","image","marginLeft","toolbar","width","profile","userName","brandContainer","purple","palette","getContrastText","deepPurple","backgroundColor","Navbar","classes","useStyles","location","useLocation","dispatch","useDispatch","initUserState","getItem","useState","user","setUser","logout","info","window","useEffect","token","decode","exp","Date","getTime","pathname","AppBar","className","position","Typography","component","Link","to","variant","align","src","usImgPath","alt","height","Toolbar","Avatar","name","imageUrl","toUpperCase","charAt","Button","onClick","swalWithBootstrapButtons","Swal","mixin","customClass","confirmButton","cancelButton","postPrefix","userPrefix","API","axios","create","baseURL","interceptors","request","use","req","userInfo","headers","Authorization","response","res","status","Promise","reject","fetchPosts","title","tags","get","join","fetchPostById","id","createPost","newPost","updatePost","patch","likePost","deletePost","delete","commentPost","comment","login","formValues","register","errorMap","errorMessage","icon","toast","showConfirmButton","timer","timerProgressBar","successMessage","showError","text","fire","showSuccess","getPosts","a","apis","errorCode","log","comments","compressionStr","length","Error","escape","substring","media","paddingTop","backgroundBlendMode","border","fullHeightCard","card","overlayLeft","top","left","overlayRight","right","grid","details","cardActions","likes","paddingLeft","cardAction","textAlign","Post","setEditingPostId","userId","googleId","history","useHistory","setLikes","deleteThisPost","showCancelButton","confirmButtonText","cancelButtonText","reverseButtons","isConfirmed","Card","ButtonBase","push","CardMedia","selectedFile","nullImage","creator","moment","createdTime","fromNow","creatorId","style","size","e","stopPropagation","fontSize","tag","gutterBottom","CardContent","CardActions","disabled","includes","mainContainer","smMargin","spacing","actionDiv","loadingPaper","emptyPaper","Posts","useSelector","Paper","elevation","CircularProgress","Grid","container","index","item","xs","sm","md","lg","root","paper","form","flexWrap","filedInput","buttonSubmit","marginBottom","chipInput","FIELDS_CONFIG","label","multiline","rows","Form","formRef","useRef","editingPost","find","postData","setPostData","clear","current","reset","onSubmit","preventDefault","autoComplete","noValidate","ref","field","TextField","value","onChange","fieldName","target","split","onFieldChange","fullWidth","onAdd","handleAddTag","onDelete","removedTag","onDone","file","base64","ul","MyPagination","setCurrentPage","Pagination","count","maxPage","page","_","renderItem","PaginationItem","appBarSearch","marginTop","gridContainer","breakpoints","down","Home","query","URLSearchParams","search","clickSearch","setClickSearch","Number","editingPostId","setTitle","setTags","handleSearchClick","keyCode","trim","Grow","in","Container","maxWidth","justify","onKeyDown","searchButton","useForm","initialState","values","setValues","handleInputChange","Input","handleChange","half","autoFocus","handleShowPassword","errorText","required","helperText","InputProps","endAdornment","InputAdornment","IconButton","GoogleIcon","t","viewBox","version","xmlns","p-id","d","fill","avatar","secondary","main","submit","googleButton","withRouter","useParams","decryptStr","tempStr","toString","decodeBase64","fromRef","isRegister","setIsRegister","showPassword","setShowPassword","isTokenExpired","setisTokenExpired","setErrorText","firstName","lastName","email","password","confirmPassword","setFormValues","googleSuccess","profileObj","tokenId","clientId","render","renderProps","startIcon","onSuccess","onFailure","cookiePolicy","textTransform","prevIsRegister","objectFit","maxHeight","section","flex","imageSection","recommendedPosts","recommendedPost","cursor","divider","img","commentsOuterContainer","commentsInnerContainer","overflowY","marginRight","Comments","commentsRef","setComment","setComments","handleComment","newComments","scrollIntoView","behavior","PostDetail","getPostById","Divider","slice","openPostDetail","App","path","exact","store","createStore","compose","applyMiddleware","thunk","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.38187862.chunk.js","sourcesContent":["// common type\r\nexport const END_LOADING = 'END_LOADING';\r\nexport const START_LOADING = 'START_LOADING';\r\n\r\n// post type\r\nexport const LIKE = 'LIKE';\r\nexport const CREATE = 'CREATE';\r\nexport const UPDATE = 'UPDATE';\r\nexport const DELETE = 'DELETE';\r\nexport const FETCH_ALL = 'FETCH_ALL';\r\nexport const FETCH_ONE = 'FETCH_ONE';\r\n\r\n// login type\r\nexport const LOGIN = 'LOGIN';\r\nexport const LOGOUT = 'LOGOUT';\r\nexport const REGISTER = 'REGISTER';"," import { START_LOADING, END_LOADING, FETCH_ALL, FETCH_ONE, CREATE, UPDATE, DELETE } from '../constants/constantsType.js';\r\n \r\n const initState = { post: null, posts: [], pagination: { currentPage: 1 }, isLoading: false };\r\n \r\n const postsReducer = (state = initState, action) => {\r\n  const { posts } = state;\r\n  const { data, pagination } = action.payload || {};\r\n  switch (action.type) {\r\n    case START_LOADING:\r\n      return { ...state, isLoading: true };\r\n    case END_LOADING:\r\n      return { ...state, isLoading: false };\r\n    case FETCH_ONE:\r\n        return { ...state, post: data[0] };\r\n    case FETCH_ALL:\r\n      return { ...state, posts: data, pagination };\r\n    case CREATE:\r\n      return {...state, posts: posts.concat(data) };\r\n    case UPDATE:\r\n      const updatedPost = data[0];\r\n      return { ...state, posts: posts.map((post) => post._id === updatedPost._id ? updatedPost : post) };\r\n    case DELETE:\r\n      const deletedPost = data[0];\r\n      return { ...state, posts: posts.filter((post) => post._id !== deletedPost._id) };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default postsReducer;","import { LOGIN, LOGOUT, REGISTER } from '../constants/constantsType.js';\r\n \r\nconst initState = { data: null };\r\n\r\nconst authorizeReducer = (state = initState, action) => {\r\n switch (action.type) {\r\n   case LOGIN:\r\n      localStorage.setItem('userInfo', JSON.stringify(action.payload));\r\n      return { data: action.payload };\r\n   case LOGOUT:\r\n      localStorage.removeItem('userInfo');\r\n      return { data: action.payload };\r\n   case REGISTER:\r\n      localStorage.setItem('userInfo', JSON.stringify(action.payload));\r\n      return { data: action.payload };\r\n   default:\r\n      return state;\r\n }\r\n};\r\n\r\nexport default authorizeReducer;","import { combineReducers } from 'redux';\r\n\r\nimport postsReducer from './posts';\r\nimport authorizeReducer  from './authorize';\r\n\r\nexport const reducers = combineReducers({ \r\n  posts: postsReducer,\r\n  authorize: authorizeReducer,\r\n});\r\n","import CryptoJS from 'crypto-js';\r\n\r\nexport const encodeBase64 = (str) => {\r\n  let encryptStr = '';\r\n  if (!str) {\r\n    return encryptStr;\r\n  }\r\n  try {\r\n    const words = CryptoJS.enc.Utf8.parse(str);\r\n    encryptStr = CryptoJS.enc.Base64.stringify(words);\r\n    // use ascii replace '/' after encrypt\r\n    if (encryptStr.indexOf('/')) {\r\n      encryptStr = encryptStr.replace(/\\/+/g, '%2F');\r\n    }\r\n  } catch (error) {\r\n    console.error(`Base65 encode string failed with error: ${error.message}`);\r\n  }\r\n  return encryptStr;\r\n}\r\n\r\nexport const decodeBase64 = (str) => {\r\n  let decryptStr = '';\r\n  if (!str) {\r\n    return decryptStr;\r\n  }\r\n  try {\r\n    let tempStr = str;\r\n    if (tempStr.indexOf('%2F')) {\r\n      tempStr = tempStr.replace(/(%2F)+/g, '/');\r\n    }\r\n    const words = CryptoJS.enc.Base64.parse(tempStr);\r\n    decryptStr = words.toString(CryptoJS.enc.Utf8);\r\n  } catch (error) {\r\n    console.error(`Decode string failed with error: ${error.message}`);\r\n  }\r\n  return decryptStr;\r\n}\r\n\r\nexport const hash = (str) => {\r\n  let encryptStr = '';\r\n  if (!str) {\r\n    return encryptStr;\r\n  }\r\n  try {\r\n    const words = CryptoJS.enc.Utf8.parse(str);\r\n    encryptStr = CryptoJS.SHA256(words).toString(CryptoJS.enc.Hex);\r\n  } catch (error) {\r\n    console.error(`Hash encode string failed with error: ${error.message}`);\r\n  }\r\n  return encryptStr;\r\n}","export default __webpack_public_path__ + \"static/media/us.9cfa8a46.png\";","import { makeStyles } from '@material-ui/core/styles';\r\nimport { deepPurple } from '@material-ui/core/colors';\r\n\r\nexport default makeStyles((theme) => ({\r\n  appBar: {\r\n    borderRadius: 15,\r\n    margin: '30px 0',\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    padding: '10px 50px',\r\n  },\r\n  heading: {\r\n    color: 'rgba(0,183,255, 1)',\r\n    textDecoration: 'none',\r\n  },\r\n  image: {\r\n    marginLeft: '15px',\r\n  },\r\n  toolbar: {\r\n    display: 'flex',\r\n    justifyContent: 'flex-end',\r\n    width: '400px',\r\n  },\r\n  profile: {\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    width: '250px',\r\n  },\r\n  userName: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n  },\r\n  brandContainer: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n  },\r\n  purple: {\r\n    color: theme.palette.getContrastText(deepPurple[500]),\r\n    backgroundColor: deepPurple[500],\r\n  },\r\n}));\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { AppBar, Typography, Toolbar, Avatar, Button } from '@material-ui/core';\r\nimport { Link, useLocation } from 'react-router-dom';\r\nimport decode from 'jwt-decode';\r\n\r\nimport { encodeBase64 } from '../../utils/crypto';\r\nimport { LOGOUT } from '../../constants/constantsType';\r\nimport usImgPath from '../../images/us.png';\r\nimport useStyles from './styles';\r\n\r\nconst Navbar = () => {\r\n  const classes = useStyles();\r\n  const location = useLocation();\r\n  const dispatch = useDispatch();\r\n\r\n  const initUserState = JSON.parse(localStorage.getItem('userInfo'));\r\n  const [user, setUser] = useState(initUserState);\r\n\r\n  const logout = (info) => {\r\n    dispatch({ type: LOGOUT, payload: null });\r\n    setUser(null);\r\n    if (info) {\r\n      window.location = `/OursAlbum/login/${info}`;\r\n    } else {\r\n      window.location = `/OursAlbum/login`;\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    const token = user?.token;\r\n    \r\n    if (token) {\r\n      const decodedToken = decode(token);\r\n      if (decodedToken.exp * 1000 < new Date().getTime()){\r\n        const info = encodeBase64(JSON.stringify({ error: 403 }));\r\n        logout(info);\r\n      };\r\n    }\r\n    setUser(initUserState);\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [location.pathname]);\r\n\r\n  return (\r\n    <AppBar className={classes.appBar} position=\"static\" color=\"inherit\">\r\n      <div className={classes.brandContainer}>\r\n        <Typography component={Link} to=\"/OursAlbum\" className={classes.heading} variant=\"h2\" align=\"center\">Ours Album</Typography>\r\n        <img className={classes.image} src={usImgPath} alt=\"icon\" height=\"60\" />\r\n      </div>\r\n      <Toolbar className={classes.toolbar}>\r\n        {\r\n          user ? (\r\n          <div className={classes.profile}>\r\n            <Avatar className={classes.purple} alt={user.name} src={user.imageUrl}>{user.name.toUpperCase().charAt(0)}</Avatar>\r\n            <Typography className={classes.userName} variant=\"h6\">{user.name}</Typography>\r\n            <Button onClick={() => logout()} variant=\"contained\" className={classes.logout} color=\"secondary\">Logout</Button>\r\n          </div>\r\n          ) : (\r\n            <Button component={Link} to=\"/OursAlbum/login\" variant=\"contained\" color=\"primary\">Login</Button>\r\n          )\r\n        }\r\n      </Toolbar>\r\n    </AppBar>\r\n  );\r\n};\r\n\r\nexport default Navbar;","import Swal from 'sweetalert2';\r\n\r\nimport './styles.css';\r\n\r\nconst swalWithBootstrapButtons = Swal.mixin({\r\n  customClass: {\r\n    confirmButton: 'btn btn-danger',\r\n    cancelButton: 'btn btn-success'\r\n  },\r\n});\r\n\r\nexport const DeleteConfirmDialog = () => {\r\n  return swalWithBootstrapButtons.fire({\r\n    title: 'Are you sure for delete?',\r\n    text: \"You won't be able to revert this, the post will be permanently lost!\",\r\n    icon: 'warning',\r\n    showCancelButton: true,\r\n    confirmButtonText: 'delete',\r\n    cancelButtonText: 'cancel',\r\n    reverseButtons: true\r\n  });;\r\n}","import axios from 'axios';\r\nimport { encodeBase64 } from '../utils/crypto';\r\n\r\nconst postPrefix = '/v1/post';\r\nconst userPrefix = '/v1/user';\r\n\r\nconst baseURL = 'https://ligengxin-server.top/Ours-Album';\r\n\r\nconst API = axios.create({ baseURL });\r\n\r\n\r\nAPI.interceptors.request.use((req) => {\r\n  const userInfo = JSON.parse(localStorage.getItem('userInfo'));\r\n  if (userInfo?.token) {\r\n    req.headers.Authorization = `Bearer ${userInfo.token}`;\r\n  }\r\n  return req;\r\n});\r\n\r\nAPI.interceptors.response.use((res) => {\r\n    return res;\r\n  },\r\n  (error) => {\r\n    const { response: { status} } = error;\r\n    if (status === 403) {\r\n      const info = encodeBase64(JSON.stringify({ error: 403 }));\r\n      localStorage.removeItem('userInfo');\r\n      window.location = `/OursAlbum/login/${info}`;\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport const fetchPosts = (title, tags, currentPage) => API.get(`${postPrefix}/?title=${title}&tags=${tags.join(',')}&currentPage=${currentPage}`);\r\n\r\nexport const fetchPostById = (id) => API.get(`${postPrefix}/${id}`);\r\n\r\nexport const createPost = (newPost) => API.post(`${postPrefix}`, newPost);\r\n\r\nexport const updatePost = (id, newPost) => API.patch(`${postPrefix}/${id}`, newPost);\r\n\r\nexport const likePost = (id) => API.patch(`${postPrefix}/likepost/${id}`);\r\n\r\nexport const deletePost = (id) => API.delete(`${postPrefix}/${id}`);\r\n\r\nexport const commentPost = (id, comment) => API.post(`${postPrefix}/comment`, { id, comment });\r\n\r\nexport const login = (formValues) => API.post(`${userPrefix}/login`, formValues);\r\n\r\nexport const register = (formValues) => API.post(`${userPrefix}/register`, formValues);","import * as ERROR_CODE from './errorCode';\r\n\r\nconst errorMap = {\r\n  [ERROR_CODE.SERVER_UNKNOWN_ERROR]: 'Something went wrong, please try laster',\r\n  [ERROR_CODE.UNAUTH]: 'User not auth, please login',\r\n  [ERROR_CODE.USER_EXIST]: `User already exist`,\r\n  [ERROR_CODE.USER_NOT_EXIST]: 'User not exist',\r\n  [ERROR_CODE.INCORRECT_USERNAME_OR_PASSWORD]: 'Username or password error',\r\n  [ERROR_CODE.POST_EXIST]: 'Post already exist',\r\n  [ERROR_CODE.POST_NOT_EXIST]: 'Post not exist',\r\n}\r\n\r\nexport default errorMap;\r\n","export const NONE = 'NONE';\r\nexport const SERVER_UNKNOWN_ERROR = 'SERVER_UNKNOWN_ERROR';\r\n\r\nexport const UNAUTH = 'UNAUTH';\r\nexport const USER_EXIST = 'USER_EXIST';\r\nexport const USER_NOT_EXIST = 'USER_NOT_EXIST';\r\nexport const INCORRECT_USERNAME_OR_PASSWORD = 'INCORRECT_USERNAME_OR_PASSWORD';\r\n\r\nexport const POST_EXIST = 'POST_EXIST';\r\nexport const POST_NOT_EXIST = 'POST_NOT_EXIST';","import Swal from 'sweetalert2';\r\nimport errorMap from '../../../config/errorMap';\r\n\r\n\r\nconst errorMessage = Swal.mixin({\r\n  icon: 'error',\r\n  toast: true,\r\n  position: 'top',\r\n  showConfirmButton: false,\r\n  timer: 3000,\r\n  timerProgressBar: true,\r\n  width: '500',\r\n});\r\n\r\nconst successMessage = Swal.mixin({\r\n  icon: 'success',\r\n  toast: true,\r\n  position: 'top',\r\n  showConfirmButton: false,\r\n  timer: 3000,\r\n  timerProgressBar: true,\r\n  width: '500'\r\n});\r\n\r\n\r\nexport const showError = (text) => {\r\n  const message = errorMap[text] || text;\r\n  errorMessage.fire(message);\r\n}\r\n\r\nexport const showSuccess = (text) => {\r\n  successMessage.fire(text);\r\n}\r\n","import * as apis from '../apis';\r\nimport { showError, showSuccess } from '../components/Common/showMessage/showMessage';\r\n\r\nimport { START_LOADING, END_LOADING, FETCH_ALL, FETCH_ONE, CREATE, UPDATE, DELETE } from '../constants/constantsType.js';\r\n\r\nexport const getPosts = (title, tags, currentPage) => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: START_LOADING });\r\n    const { data } = await apis.fetchPosts(title, tags, currentPage);\r\n    dispatch({ type: FETCH_ALL, payload: data });\r\n  } catch (error) { \r\n    if (error.response) {\r\n      showError(error.response.data.errorCode);\r\n    } \r\n    console.log('Error occurrence when fetch all posts with error:', error.message);\r\n  } finally {\r\n    dispatch({ type: END_LOADING });\r\n  }\r\n}\r\n\r\nexport const getPostById = (id) => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: START_LOADING });\r\n    const { data } = await apis.fetchPostById(id);\r\n    dispatch({ type: FETCH_ONE, payload: data });\r\n  } catch (error) {     \r\n    if (error.response) {\r\n      showError(error.response.data.errorCode);\r\n    } \r\n    console.log('Error occurrence when fetch all posts with error:', error.message);\r\n  } finally {\r\n    dispatch({ type: END_LOADING });\r\n  }\r\n}\r\n\r\nexport const createPost = (newPost) => async (dispatch) => {\r\n  try {\r\n    const { data } = await apis.createPost(newPost);\r\n    dispatch({ type: CREATE, payload: data });\r\n    showSuccess('Create post success');\r\n  } catch (error) {     \r\n    if (error.response) {\r\n      showError(error.response.data.errorCode);\r\n    } \r\n    console.log('Error occurrence when create post with error:', error.message);\r\n  }\r\n}\r\n\r\nexport const updatePost = (id, newPost) => async (dispatch) => {\r\n  try {\r\n    const { data } = await apis.updatePost(id, newPost);\r\n    dispatch({ type: UPDATE, payload: data });\r\n    showSuccess('Update post success');\r\n  } catch (error) {     \r\n    if (error.response) {\r\n      showError(error.response.data.errorCode);\r\n    } \r\n    console.log('Error occurrence when update post with error:', error.message);\r\n  }\r\n}\r\n\r\nexport const likePost = (id) => async (dispatch) => {\r\n  try {\r\n    const { data } = await apis.likePost(id);\r\n    dispatch({ type: UPDATE, payload: data });\r\n  } catch (error) {     \r\n    if (error.response) {\r\n      showError(error.response.data.errorCode);\r\n    } \r\n    console.log('Error occurrence when like post with error:', error.message);\r\n  }\r\n}\r\n\r\nexport const deletePost = (id) => async (dispatch) => {\r\n  try {\r\n    const { data } = await apis.deletePost(id);\r\n    dispatch({ type: DELETE, payload: data });\r\n    showSuccess('Delete post success');\r\n  } catch (error) {     \r\n    if (error.response) {\r\n      showError(error.response.data.errorCode);\r\n    } \r\n    console.log('Error occurrence when delete post with error:', error.message);\r\n  }\r\n}\r\n\r\nexport const commentPost = (id, comment) => async (dispatch) => { \r\n  try {\r\n    const { data } = await apis.commentPost(id, comment);\r\n    dispatch({ type: UPDATE, payload: data });\r\n    return data.data[0].comments;\r\n  } catch (error) {     \r\n    if (error.response) {\r\n      showError(error.response.data.errorCode);\r\n    } \r\n    console.log('Error occurrence when Comment post with error:', error.message);\r\n  }\r\n}","const compressionStr = (str, length) => {\r\n  if (typeof str !== 'string') {\r\n    throw new Error('str is not a String');\r\n  }\r\n\r\n  if (typeof length !== 'number') {\r\n    throw new Error('length is not a Number');\r\n  }\r\n\r\n  length = escape(str).indexOf('%u') < 0 ? length : length / 2;\r\n\r\n  if (str.length > length) {\r\n    str = str.substring(0, length) + '...';\r\n  }\r\n\r\n  return str;\r\n}\r\n\r\nexport default compressionStr;\r\n","export default __webpack_public_path__ + \"static/media/null.09cb794a.png\";","import { makeStyles } from '@material-ui/core/styles';\r\n\r\nexport default makeStyles({\r\n  media: {\r\n    height: 0,\r\n    paddingTop: '56.25%',\r\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\r\n    backgroundBlendMode: 'darken',\r\n  },\r\n  border: {\r\n    border: 'solid',\r\n  },\r\n  fullHeightCard: {\r\n    height: '100%',\r\n  },\r\n  card: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    justifyContent: 'space-between',\r\n    borderRadius: '15px',\r\n    height: '420px',\r\n    position: 'relative',\r\n  },\r\n  overlayLeft: {\r\n    position: 'absolute',\r\n    top: '20px',\r\n    left: '20px',\r\n    color: 'white',\r\n  },\r\n  overlayRight: {\r\n    position: 'absolute',\r\n    top: '20px',\r\n    right: '20px',\r\n    color: 'white',\r\n  },\r\n  grid: {\r\n    display: 'flex',\r\n  },\r\n  details: {\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    margin: '20px',\r\n  },\r\n  title: {\r\n    padding: '0 16px',\r\n  },\r\n  cardActions: {\r\n    padding: '0 16px 8px 16px',\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n  },\r\n  likes: {\r\n    paddingLeft: '3px',\r\n  },\r\n  cardAction: {\r\n    display: 'block',\r\n    textAlign: 'initial',\r\n  },\r\n});\r\n","import React, { useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { Card, CardActions, CardContent, CardMedia, Button, Typography, ButtonBase } from '@material-ui/core/';\r\nimport ThumbUpAltIcon from '@material-ui/icons/ThumbUpAlt';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport moment from 'moment';\r\n\r\nimport { DeleteConfirmDialog }  from '../../Common/ConfirmDialog/ConfirmDialog';\r\nimport { deletePost, likePost } from '../../../actions/posts'\r\nimport compressionStr from '../../../utils/compressionStr';\r\n\r\nimport nullImage from '../../../images/null.png';\r\nimport useStyles from './styles';\r\n\r\nconst Post = ({ post, setEditingPostId }) => {\r\n  const user = JSON.parse(localStorage.getItem('userInfo'));\r\n  const userId = user?.googleId || user?.id;\r\n\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n\r\n  const [likes, setLikes] = useState(post.likes);\r\n\r\n  const editPost = (e) => {\r\n    e.stopPropagation();\r\n    setEditingPostId(post._id);\r\n  }\r\n\r\n  const deleteThisPost = async () => {\r\n    const result = await DeleteConfirmDialog();\r\n    if (result.isConfirmed) {\r\n      dispatch(deletePost(post._id));\r\n    }\r\n  }\r\n\r\n  const likeThisPost = () => {\r\n    dispatch(likePost(post._id));\r\n    if (likes.includes(userId)) {\r\n      setLikes(likes.filter(id => userId !== id));\r\n    } else {\r\n      setLikes(likes.concat(userId));\r\n    }\r\n  }\r\n\r\n  const openPostDetail = () => {\r\n    history.push(`/OursAlbum/posts/${post._id}`);\r\n  };\r\n\r\n\r\n  return (\r\n    <div>\r\n      <Card className={classes.card}>\r\n        <ButtonBase component=\"span\" className={classes.cardAction} onClick={openPostDetail}>\r\n          <CardMedia className={classes.media} title={post.title} image={post.selectedFile || nullImage} />\r\n          <div className={classes.overlayLeft}>\r\n            <Typography variant=\"h6\">{post.creator}</Typography>\r\n            <Typography variant=\"body2\">{moment(post.createdTime).fromNow()}</Typography>\r\n          </div>\r\n          <div className={classes.overlayRight}>\r\n            {(userId && post.creatorId === userId) && <Button style={{ color: 'white' }} size=\"small\" onClick={editPost} ><EditIcon fontSize=\"default\" /></Button>}\r\n          </div>\r\n          <div className={classes.details}>\r\n            <Typography variant=\"body2\" color=\"textSecondary\" component=\"h2\">{post.tags.map((tag) => `#${tag} `)}</Typography>\r\n          </div>\r\n          <Typography className={classes.title} gutterBottom variant=\"h5\" component=\"h2\" title={post.title}>{compressionStr(post.title, 20)}</Typography>\r\n          <CardContent>\r\n            <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\" title={post.message}>{compressionStr(post.message, 90)}</Typography>\r\n          </CardContent>\r\n        </ButtonBase>\r\n          <CardActions className={classes.cardActions}>\r\n            <Button size=\"small\" color=\"primary\" disabled={userId == null} onClick={likeThisPost}><ThumbUpAltIcon fontSize=\"small\" /><span className={classes.likes}>{likes.length}</span></Button>\r\n            {(userId && post.creatorId === userId) && <Button size=\"small\" color=\"secondary\" onClick={deleteThisPost}><DeleteIcon fontSize=\"small\" /></Button>}\r\n        </CardActions>\r\n      </Card>\r\n    </div>\r\n  )\r\n};\r\n\r\nexport default Post;","import { makeStyles } from '@material-ui/core/styles';\r\n\r\nexport default makeStyles((theme) => ({\r\n  mainContainer: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n  },\r\n  smMargin: {\r\n    margin: theme.spacing(1),\r\n  },\r\n  actionDiv: {\r\n    textAlign: 'center',\r\n  },\r\n  loadingPaper: {\r\n    display: 'flex', justifyContent: 'center', alignItems: 'center', padding: '20px', borderRadius: '15px', height: '90%',\r\n  },\r\n  emptyPaper: {\r\n    display: 'flex', justifyContent: 'center', alignItems: 'center', padding: '20px', borderRadius: '15px', height: '90%',\r\n  },\r\n}));\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { Grid, Paper, CircularProgress } from '@material-ui/core'\r\n\r\nimport Post from './Post/Post';\r\n\r\nimport useStyles from './styles';\r\n\r\nconst Posts = ({ setEditingPostId }) => {\r\n  const { posts, isLoading } = useSelector((state) => state.posts);\r\n  const classes = useStyles();\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <Paper elevation={6} className={classes.loadingPaper}>\r\n        <CircularProgress size=\"7rem\" />\r\n      </Paper>\r\n    );\r\n  }\r\n\r\n  if (posts.length === 0) {\r\n    return (\r\n      <Paper elevation={6} className={classes.emptyPaper}>\r\n        <h1>No posts found</h1>\r\n      </Paper>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {\r\n        <Grid className={classes.container} container alignItems=\"stretch\" spacing={3}>\r\n          { \r\n            posts.map((post, index) => {\r\n              return (\r\n                <Grid key={index} item xs={12} sm={12} md={6} lg={3}>\r\n                  <Post post={post} setEditingPostId={setEditingPostId} />\r\n                </Grid>\r\n              )\r\n            })\r\n          }\r\n        </Grid>\r\n      }\r\n    </div>\r\n  )\r\n};\r\n\r\nexport default Posts;\r\n","\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nexport default makeStyles((theme) => ({\r\n  root: {\r\n    '& .MuiTextField-root': {\r\n      margin: theme.spacing(1),\r\n    },\r\n  },\r\n  paper: {\r\n    padding: theme.spacing(2),\r\n  },\r\n  form: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    justifyContent: 'center',\r\n  },\r\n  filedInput: {\r\n    width: '100%',\r\n    margin: '10px 0',\r\n  },\r\n  buttonSubmit: {\r\n    marginBottom: 10,\r\n  },\r\n  chipInput: {\r\n    width: '96%',\r\n    padding: '5px 0'\r\n  },\r\n}));\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { TextField, Button, Typography, Paper } from '@material-ui/core';\r\nimport ChipInput from 'material-ui-chip-input';\r\nimport FileBase from 'react-file-base64';\r\n\r\nimport { createPost, updatePost } from '../../actions/posts';\r\n\r\nimport useStyles from './styles';\r\n\r\nconst FIELDS_CONFIG = [\r\n  { name: 'title',label: 'Title' },\r\n  { name: 'message', label: 'Description', multiline: true, rows: 4 }\r\n]\r\n\r\nconst Form = ({ id, setEditingPostId }) => {\r\n  const classes = useStyles();\r\n  const formRef = useRef();\r\n  const dispatch = useDispatch();\r\n  const editingPost = useSelector((state) => {\r\n    const { posts } = state.posts;\r\n    return posts.find((post) => {\r\n      return post._id === id;\r\n    });\r\n  });\r\n\r\n  const userInfo = JSON.parse(localStorage.getItem('userInfo'));\r\n  const [postData , setPostData] = useState({ creator: userInfo?.name, creatorId: userInfo?.id, title: '', message: '', tags: [], selectedFile: '' });\r\n\r\n  const onFieldChange = (e, fieldName) => {\r\n    if (fieldName === 'tags') {\r\n      setPostData({ ...postData, [fieldName]: e.target.value.split(',') });\r\n    } else {\r\n      setPostData({ ...postData, [fieldName]: e.target.value });\r\n    }\r\n  }\r\n\r\n  const clear = () => {\r\n    setPostData({ title: '', message: '', tags: [], selectedFile: '' });\r\n    setEditingPostId(null);\r\n    formRef.current.reset();\r\n  }\r\n\r\n  const uploadFile = (file) => {\r\n    setPostData({ ...postData, selectedFile: file.base64 });\r\n  }\r\n\r\n  const onSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if(id) {\r\n      dispatch(updatePost(id, postData));\r\n    } else {\r\n      dispatch(createPost(postData));\r\n    }\r\n    clear();\r\n  }\r\n\r\n  const handleAddTag = (tag) => {\r\n    setPostData({ ...postData, tags: postData.tags.concat(tag) });\r\n  }\r\n\r\n  const handleRemoveTag = (removedTag) => {\r\n    setPostData({ ...postData, tags: postData.tags.filter((tag) => tag !== removedTag) });\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (editingPost) {\r\n      setPostData(editingPost)\r\n    };\r\n  }, [editingPost]);\r\n\r\n  if (!userInfo?.name) {\r\n    return (\r\n      <Paper className={classes.paper}>\r\n        <Typography variant=\"h6\" align=\"center\">\r\n          Login for create or like a post\r\n        </Typography>\r\n      </Paper>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Paper className={classes.paper}>\r\n      <form autoComplete='off' noValidate className={`${classes.root} ${classes.form}`} onSubmit={onSubmit} ref={formRef}>\r\n        <Typography variant='h6'>{ `${id ? 'Update': 'Create'} Post` }</Typography>\r\n          {\r\n            FIELDS_CONFIG.map((field) => {\r\n              const { name, label, multiline = false, rows } = field;\r\n              return <TextField value={postData[name]} onChange={(e) => onFieldChange(e, name)} name={name} label={label} multiline={multiline} key={name} rows={rows} variant='outlined' fullWidth />\r\n            })\r\n          }\r\n          <div  className={classes.chipInput}>\r\n            <ChipInput\r\n              name=\"tags\"\r\n              label=\"Tag\"\r\n              variant=\"outlined\"\r\n              fullWidth\r\n              value={postData.tags}\r\n              onAdd={(tag) => handleAddTag(tag)}\r\n              onDelete={(tag) => handleRemoveTag(tag)}\r\n            />\r\n          </div>\r\n          <div className={classes.filedInput} >\r\n            <FileBase onDone={uploadFile} /> \r\n          </div>\r\n        <Button className={classes.buttonSubmit} variant='contained' color='primary' size='large' type='submit' fullWidth>Submit</Button>\r\n        <Button variant='contained' color='secondary' size='small' fullWidth onClick={clear}>clear</Button>\r\n      </form>\r\n    </Paper>\r\n  )\r\n};\r\n\r\nexport default Form;\r\n","import { makeStyles } from '@material-ui/core/styles';\r\n\r\nexport default makeStyles(() => ({\r\n  ul: {\r\n    justifyContent: 'space-around',\r\n  },\r\n}));\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { Pagination , PaginationItem } from '@material-ui/lab';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport useStyles from './styles';\r\n\r\nconst MyPagination = ({ title, tags, currentPage, setCurrentPage }) => {\r\n  const classes = useStyles();\r\n  const { pagination } = useSelector((state) => state.posts);\r\n\r\n  const changePage = (_, page) => {\r\n    setCurrentPage(page);\r\n  }\r\n\r\n  return (\r\n    <Pagination\r\n      classes={{ ul: classes.ul }}\r\n      count={pagination.maxPage}\r\n      page={currentPage}\r\n      variant=\"outlined\"\r\n      color=\"primary\"\r\n      onChange={changePage}\r\n      renderItem={(item) => <PaginationItem {...item} component={Link} to={`/OursAlbum/posts?title=${title}&tags=${tags.join(',')}&currentPage=${item.page}`} />}\r\n    />\r\n  );\r\n};\r\n\r\nexport default MyPagination;\r\n","import { makeStyles } from '@material-ui/core/styles';\r\n\r\nexport default makeStyles((theme) => ({\r\n  appBarSearch: {\r\n    borderRadius: 4,\r\n    marginBottom: '1rem',\r\n    display: 'flex',\r\n    padding: '16px',\r\n  },\r\n  pagination: {\r\n    borderRadius: 4,\r\n    marginTop: '1rem',\r\n    padding: '16px',\r\n  },\r\n  chipInput: {\r\n    margin: '10px 0',\r\n  },\r\n  gridContainer: {\r\n    [theme.breakpoints.down('xs')]: {\r\n      flexDirection: 'column-reverse',\r\n    },\r\n  },\r\n}));\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useHistory, useLocation } from 'react-router-dom';\r\nimport ChipInput from 'material-ui-chip-input';\r\nimport { Container, Grow, Grid, AppBar, Paper, TextField, Button } from '@material-ui/core';\r\n\r\nimport Posts from '../Posts/Posts';\r\nimport Form from '../PostForm/PostForm';\r\nimport Pagination from '../Common/Pagination/Pagination';\r\n\r\nimport { getPosts } from '../../actions/posts';\r\n\r\nimport useStyles from './styles';\r\n\r\nconst useParamsQuery = () => {\r\n  return new URLSearchParams(useLocation().search);\r\n}\r\n\r\nconst Home = () => {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n  const query = useParamsQuery();\r\n\r\n  const [clickSearch, setClickSearch] = useState(false);\r\n  const [currentPage, setCurrentPage] = useState(Number(query.get('currentPage')) || 1);\r\n\r\n  const [editingPostId, setEditingPostId] = useState(null);\r\n  const [title, setTitle] = useState('');\r\n  const [tags, setTags] = useState([]);\r\n\r\n  const handleTitleChange = e => {\r\n    setTitle(e.target.value);\r\n  }\r\n\r\n  const handleAddTag = (tag) => {\r\n    setTags(tags.concat(tag));\r\n  }\r\n\r\n  const handleRemoveTag = (removedTag) => {\r\n    setTags(tags.filter(tag => tag !== removedTag));\r\n  }\r\n\r\n  const handleSearchClick = (e) => {\r\n    if (e.keyCode === 13) {\r\n      if (title.trim() || tags.length > 0) {\r\n        history.push(`/OursAlbum/posts?title=${title}&tags=${tags.join(',')}&currentPage=${1}`);\r\n        setCurrentPage(1);\r\n        setClickSearch(!clickSearch); // trigger fetch post\r\n      } else {\r\n        history.push(`/`);\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    dispatch(getPosts(title, tags, currentPage));\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [clickSearch, currentPage])\r\n\r\n  return (\r\n    <Grow in>\r\n      <Container maxWidth=\"xl\">\r\n        <Grid container justify=\"space-between\" alignItems=\"stretch\" spacing={3} className={classes.gridContainer}>\r\n          <Grid item xs={12} md={9} sm={6}>\r\n            <Posts setEditingPostId={setEditingPostId} />\r\n          </Grid>\r\n          <Grid item xs={12} sm={6} md={3}>\r\n          <AppBar className={classes.appBarSearch} position=\"static\" color=\"inherit\">\r\n            <TextField onKeyDown={handleSearchClick} value={title} onChange={handleTitleChange} name=\"search\" variant=\"outlined\" label=\"Title\" fullWidth />\r\n              <ChipInput\r\n                className={classes.chipInput}\r\n                value={tags}\r\n                onAdd={(tag) => handleAddTag(tag)}\r\n                onDelete={(tag) => handleRemoveTag(tag)}\r\n                label=\"Tag\"\r\n                variant=\"outlined\"\r\n              />\r\n            <Button className={classes.searchButton} variant=\"contained\" color=\"primary\" onClick={() => handleSearchClick({ keyCode: 13 })}>Search</Button>\r\n          </AppBar>\r\n          <Form id={editingPostId} setEditingPostId={setEditingPostId} />\r\n          <Paper className={classes.pagination} elevation={6}>\r\n            <Pagination title={title} tags={tags} currentPage={currentPage} setCurrentPage={setCurrentPage} />\r\n          </Paper>\r\n          </Grid>\r\n        </Grid>\r\n      </Container>\r\n    </Grow>\r\n  );\r\n};\r\n\r\nexport default Home;","import { useState } from 'react';\r\n\r\nconst useForm = (initialState = {}) => {\r\n  const [values, setValues] = useState(initialState);\r\n\r\n  const reset = () => setValues(initialState);\r\n\r\n  const handleInputChange = ({ target }) => {\r\n    setValues({ ...values, [target.name]: target.value });\r\n  };\r\n  return [values, handleInputChange, reset];\r\n};\r\n\r\nexport default useForm;","import React from 'react';\r\nimport { TextField, Grid, InputAdornment, IconButton } from '@material-ui/core';\r\n\r\nimport Visibility from '@material-ui/icons/Visibility';\r\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\r\n\r\nconst Input = ({ name, value, handleChange, label, half, autoFocus, type, handleShowPassword, errorText }) => (\r\n  <Grid item xs={12} sm={half ? 6 : 12}>\r\n    <TextField\r\n      value={value}\r\n      name={name}\r\n      onChange={handleChange}\r\n      variant='outlined'\r\n      required\r\n      fullWidth\r\n      label={label}\r\n      autoFocus={autoFocus}\r\n      type={type}\r\n      error={errorText}\r\n      helperText={errorText}\r\n      InputProps={name === 'password' ? {\r\n        endAdornment: (\r\n          <InputAdornment position='end'>\r\n            <IconButton onClick={handleShowPassword}>\r\n              {type === 'password' ? <Visibility /> : <VisibilityOff />}\r\n            </IconButton>\r\n          </InputAdornment>\r\n        ),\r\n      } : null}\r\n    />\r\n  </Grid>\r\n);\r\n\r\nexport default Input;\r\n","import React from 'react';\r\n\r\nconst GoogleIcon = () => {\r\n  return (\r\n    <svg t=\"1625061488031\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"3063\" width=\"20\" height=\"20\">\r\n      <path d=\"M214.101333 512c0-32.512 5.546667-63.701333 15.36-92.928L57.173333 290.218667A491.861333 491.861333 0 0 0 4.693333 512c0 79.701333 18.858667 154.88 52.394667 221.610667l172.202667-129.066667A290.56 290.56 0 0 1 214.101333 512\" fill=\"#FBBC05\" p-id=\"3064\"></path>\r\n      <path d=\"M516.693333 216.192c72.106667 0 137.258667 25.002667 188.458667 65.962667L854.101333 136.533333C763.349333 59.178667 646.997333 11.392 516.693333 11.392c-202.325333 0-376.234667 113.28-459.52 278.826667l172.373334 128.853333c39.68-118.016 152.832-202.88 287.146666-202.88\" fill=\"#EA4335\" p-id=\"3065\"></path>\r\n      <path d=\"M516.693333 807.808c-134.357333 0-247.509333-84.864-287.232-202.88l-172.288 128.853333c83.242667 165.546667 257.152 278.826667 459.52 278.826667 124.842667 0 244.053333-43.392 333.568-124.757333l-163.584-123.818667c-46.122667 28.458667-104.234667 43.776-170.026666 43.776\" fill=\"#34A853\" p-id=\"3066\"></path>\r\n      <path d=\"M1005.397333 512c0-29.568-4.693333-61.44-11.648-91.008H516.650667V614.4h274.602666c-13.696 65.962667-51.072 116.650667-104.533333 149.632l163.541333 123.818667c93.994667-85.418667 155.136-212.650667 155.136-375.850667\" fill=\"#4285F4\" p-id=\"3067\"></path>\r\n    </svg>\r\n  )\r\n};\r\n\r\nexport default GoogleIcon;\r\n","import { makeStyles } from '@material-ui/core/styles';\r\n\r\nexport default makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n    padding: theme.spacing(2),\r\n  },\r\n  root: {\r\n    '& .MuiTextField-root': {\r\n      margin: theme.spacing(1),\r\n    },\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: '100%',\r\n    marginTop: theme.spacing(3),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n  googleButton: {\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n}));\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useHistory, withRouter, useParams } from 'react-router-dom';\r\nimport { Avatar, Button, Paper, Grid, Typography, Container } from '@material-ui/core';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport { GoogleLogin } from 'react-google-login';\r\n\r\nimport useForm from '../../hooks/useForm';\r\nimport { LOGIN } from '../../constants/constantsType';\r\nimport { showError, showSuccess } from '../Common/showMessage/showMessage';\r\nimport Input from './Input/Input';\r\nimport GoogleIcon from './GoogleIcon/GoogleIcon';\r\nimport { login, register } from '../../actions/authorize';\r\nimport { encodeBase64, decodeBase64 } from '../../utils/crypto.js';\r\n\r\nimport useStyles from './styles';\r\n\r\n\r\nconst Authorize = () => {\r\n  const { info } = useParams();\r\n  let error = null;\r\n  if (info) {\r\n    error = JSON.parse(decodeBase64(info)).error;\r\n  }\r\n\r\n  const classes = useStyles();\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const fromRef = useRef();\r\n  \r\n  const [isRegister, setIsRegister] = useState(false);\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [isTokenExpired, setisTokenExpired] = useState(!!error);\r\n  const [errorText, setErrorText] = useState(null);\r\n\r\n  const [formValues, setFormValues] = useForm({ firstName: '', lastName: '', email: 'useThisAccountOrGoogleAccount@login', password: 'TomAndJerry', confirmPassword: '' });\r\n\r\n  const handleShowPassword = () => setShowPassword(!showPassword);\r\n\r\n  const switchMode = () => {\r\n    setShowPassword(false);\r\n    setIsRegister(prevIsRegister => !prevIsRegister);\r\n    fromRef.current.reset();\r\n  }\r\n\r\n  const googleSuccess = async (res) => {\r\n    setisTokenExpired(false);\r\n    dispatch({ type: LOGIN, payload: { ...res.profileObj, token: res.tokenId } });\r\n    history.push('/');\r\n    showSuccess('Google account login Success');\r\n  };\r\n\r\n  const googleError = (error) => {\r\n    if (error.error !== 'popup_closed_by_user') {\r\n      showError('Google account login failed');\r\n      console.error(`Google account login failed with error: ${JSON.stringify(error)}`);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const password = encodeBase64(formValues.password);\r\n    if (isRegister) {\r\n      if (formValues.password !== formValues.confirmPassword) {\r\n        setErrorText(`Passwords doesn't match`);\r\n        return;\r\n      }\r\n      dispatch(register({...formValues, password }, history));\r\n    } else {\r\n      dispatch(login({...formValues, password }, history));\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (isTokenExpired) {\r\n      showError('Certification expired, please login again');\r\n    }\r\n  }, [isTokenExpired])\r\n\r\n  return (\r\n    <Container component='main' maxWidth='xs'>\r\n      <Paper className={classes.paper} elevation={6} >\r\n        <Avatar className={classes.avatar}>\r\n          <LockOutlinedIcon />\r\n        </Avatar>\r\n        <Typography component='h1' variant='h5'>{ isRegister ? 'Register' : 'Login' }</Typography>\r\n        <form className={classes.form} onSubmit={handleSubmit} ref={fromRef} >\r\n          <Grid container spacing={2}>\r\n            { \r\n              isRegister && (\r\n                <>\r\n                  <Input handleChange={setFormValues} name='firstName' label='firstName' autoFocus half />\r\n                  <Input handleChange={setFormValues} name='lastName' label='lastName' half />\r\n                </> \r\n              )\r\n            }\r\n            <Input handleChange={setFormValues} value={formValues.email} name='email' label='email' type='email' />\r\n            <Input handleChange={setFormValues} value={formValues.password} handleShowPassword={handleShowPassword} name='password' label='password' type={showPassword ? 'text' : 'password'} />\r\n            { isRegister && <Input handleChange={setFormValues} name='confirmPassword' label='confirmPassword' type='password' errorText={errorText} /> }\r\n          </Grid>\r\n          <Button type='submit' fullWidth variant='contained' color='primary' className={classes.submit}>\r\n            { isRegister ? 'Register' : 'Login' }\r\n          </Button>\r\n          <GoogleLogin\r\n            clientId='160069951274-9lk4icl4nvv4lbb61umon883c3rb6dtf.apps.googleusercontent.com'\r\n            render={(renderProps) => (\r\n              <Button onClick={renderProps.onClick} disabled={renderProps.disabled} className={classes.googleButton} fullWidth color='primary' startIcon={<GoogleIcon />} variant='contained'>\r\n                Google Account Login\r\n              </Button>\r\n            )}\r\n            onSuccess={googleSuccess}\r\n            onFailure={googleError}\r\n            cookiePolicy='single_host_origin'\r\n          />\r\n          <Grid container justify='flex-end'>\r\n            <Grid item>\r\n              <Button style={{ textTransform: 'none' }} onClick={switchMode}>\r\n                { isRegister ? `Already have an account? Login` : `Don't have an account? Register` }\r\n              </Button>\r\n            </Grid>\r\n          </Grid>\r\n        </form>\r\n      </Paper>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default withRouter(Authorize);\r\n","import * as apis from '../apis';\r\nimport { showError, showSuccess } from '../components/Common/showMessage/showMessage';\r\n\r\nimport { LOGIN, REGISTER } from '../constants/constantsType.js';\r\n\r\n\r\nexport const login = (formValues, history) => async (dispatch) => {\r\n  try {\r\n    const { data } = await apis.login(formValues);\r\n    dispatch({ type: LOGIN, payload: data.userInfo });\r\n    history.push('/');\r\n    showSuccess(`Welcome ${data?.userInfo?.name}`);\r\n  } catch (error) {\r\n    if (error.response) {\r\n      showError(error.response.data.errorCode);\r\n    } \r\n    console.error(`Login failed with error: ${error.message}`);\r\n  }\r\n};\r\n\r\nexport const register = (formValues, history) => async (dispatch) => {\r\n  try {\r\n    const { data } = await apis.register(formValues);\r\n    dispatch({ type: REGISTER, payload: data.userInfo });\r\n    history.push('/');\r\n    showSuccess(`Welcome ${data?.userInfo?.name}`);\r\n  } catch (error) {\r\n    if (error.response) {\r\n      showError(error.response.data.errorCode);\r\n    } \r\n    console.error(`Register failed with error: ${error.message}`);\r\n  }\r\n};\r\n","import { makeStyles } from '@material-ui/core/styles';\r\n\r\nexport default makeStyles((theme) => ({\r\n  media: {\r\n    borderRadius: '20px',\r\n    objectFit: 'cover',\r\n    width: '100%',\r\n    maxHeight: '600px',\r\n\r\n  },\r\n  paper: {\r\n    padding: '20px', \r\n    borderRadius: '15px'\r\n  },\r\n  card: {\r\n    display: 'flex',\r\n    width: '100%',\r\n    [theme.breakpoints.down('sm')]: {\r\n      flexWrap: 'wrap',\r\n      flexDirection: 'column',\r\n    },\r\n  },\r\n  section: {\r\n    borderRadius: '20px',\r\n    margin: '10px',\r\n    flex: 1,\r\n  },\r\n  imageSection: {\r\n    marginLeft: '20px',\r\n    width: '60%',\r\n    [theme.breakpoints.down('sm')]: {\r\n      marginLeft: 0,\r\n    },\r\n  },\r\n  recommendedPosts: {\r\n    display: 'flex',\r\n    [theme.breakpoints.down('sm')]: {\r\n      flexDirection: 'column',\r\n    },\r\n  },\r\n  recommendedPost: {\r\n    margin: '10px', \r\n    width: '25%',\r\n    cursor: 'pointer',\r\n  },\r\n  loadingPaper: {\r\n    display: 'flex', justifyContent: 'center', alignItems: 'center', padding: '20px', borderRadius: '15px', height: '39vh',\r\n  },\r\n  divider: { \r\n    margin: '20px 0'\r\n  },\r\n  img: {\r\n    width: '200px'\r\n  },\r\n  commentsOuterContainer: {\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n\r\n  },\r\n  commentsInnerContainer: {\r\n    height: '200px',\r\n    overflowY: 'auto',\r\n    marginRight: '30px',\r\n    width: '70%',\r\n  },\r\n}));\r\n","import React, { useState, useRef } from 'react';\r\nimport { Typography, TextField, Button } from '@material-ui/core/';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport { commentPost } from '../../../actions/posts';\r\nimport useStyles from '../styles';\r\n\r\nconst Comments = ({ post, user }) => {\r\n  const classes = useStyles();\r\n  const dispatch = useDispatch();\r\n  const commentsRef = useRef();\r\n  \r\n  const [comment, setComment] = useState('');\r\n  const [comments, setComments] = useState(post?.comments);\r\n\r\n  const handleComment = async() => {\r\n    const newComments = await dispatch(commentPost(post._id, `${user?.name}: ${comment}`));\r\n    setComment('');\r\n    setComments(newComments);\r\n    commentsRef.current.scrollIntoView({ behavior: 'smooth' });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className={classes.commentsOuterContainer}>\r\n        <div className={classes.commentsInnerContainer} >\r\n          <Typography gutterBottom variant=\"h6\">Comments</Typography>\r\n           {\r\n            comments.map((comment, index) => {\r\n              const [name, message] = comment.split(': ');\r\n              return (\r\n                <Typography key={index} gutterBottom variant=\"subtitle1\">\r\n                  <strong title={`${name}: ${message}`}>{name}: </strong>\r\n                  {message}\r\n                </Typography>\r\n              )\r\n            })\r\n          }\r\n          <div ref={commentsRef} />\r\n        </div>\r\n        <div style={{ width: '70%' }}>\r\n          <Typography gutterBottom variant=\"h6\">Leave a comment</Typography>\r\n          <TextField fullWidth rows={4} variant=\"outlined\" label=\"Comment\" multiline value={comment} onChange={(e) => setComment(e.target.value)} />\r\n          <br />\r\n          <Button style={{ marginTop: '10px' }} fullWidth disabled={comment.length === 0} color=\"primary\" variant=\"contained\" onClick={handleComment}>\r\n            Submit\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Comments;\r\n","import React, { useEffect } from 'react';\r\nimport moment from 'moment';\r\nimport { Paper, Typography, CircularProgress, Divider } from '@material-ui/core/';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useParams, useHistory } from 'react-router-dom';\r\n\r\nimport Comments from './Comments/Comments';\r\nimport compressionStr from '../../utils/compressionStr';\r\nimport { getPosts, getPostById } from '../../actions/posts';\r\nimport nullImage from '../../images/null.png';\r\nimport useStyles from './styles';\r\n\r\nconst PostDetail = () => {\r\n  const { id } = useParams();\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n\r\n  const user = JSON.parse(localStorage.getItem('userInfo'));\r\n\r\n  const { post, posts, isLoading } = useSelector((state) => state.posts);\r\n\r\n  useEffect(() => {\r\n    dispatch(getPostById(id));\r\n  }, [dispatch, id]);\r\n\r\n  useEffect(() => {\r\n    if (post) {\r\n      dispatch(getPosts('', post.tags, 1));\r\n    }\r\n  }, [dispatch, post]);\r\n\r\n  if (!post){\r\n    return null;\r\n  }\r\n\r\n  const openPostDetail = (_id) => history.push(`/OursAlbum/posts/${_id}`);\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <Paper elevation={6} className={classes.loadingPaper}>\r\n        <CircularProgress size=\"7rem\" />\r\n      </Paper>\r\n    );\r\n  }\r\n\r\n  const recommendedPosts = posts.filter(({ _id }) => _id !== post._id);\r\n\r\n  return (\r\n    <Paper className={classes.paper} elevation={6}>\r\n      <div className={classes.card}>\r\n        <div className={classes.section}>\r\n          <Typography variant=\"h3\" component=\"h2\">{post.title}</Typography>\r\n          <Typography gutterBottom variant=\"h6\" color=\"textSecondary\" component=\"h2\">{post.tags.map((tag) => `#${tag}`)}</Typography>\r\n          <Typography gutterBottom variant=\"body1\" component=\"p\">{post.message}</Typography>\r\n          <Typography variant=\"h6\">Created by: {post.creator}</Typography>\r\n          <Typography variant=\"body1\">{moment(post.createdTime).fromNow()}</Typography>\r\n          <Divider className={classes.divider} />\r\n          { user && <Comments user={user} post={post} /> }\r\n          <Divider className={classes.divider} />\r\n        </div>\r\n        <div className={classes.imageSection}>\r\n          <img className={classes.media} src={post.selectedFile || nullImage} alt={post.title} />\r\n        </div>\r\n      </div>\r\n      { \r\n        recommendedPosts.length > 0 && (\r\n          <div className={classes.section}>\r\n            <Typography gutterBottom variant=\"h5\">You might also like:</Typography>\r\n            <Divider />\r\n            <div className={classes.recommendedPosts}>\r\n              {\r\n                recommendedPosts.slice(0, 4).map(({ _id, title, name, message, likes, selectedFile }) => (\r\n                  selectedFile && (\r\n                    <div key={_id} className={classes.recommendedPost} onClick={() => openPostDetail(_id)} >\r\n                      <Typography gutterBottom variant=\"h6\" title={title}>{compressionStr(title, 40)}</Typography>\r\n                      <Typography gutterBottom variant=\"subtitle2\" title={name}>{name}</Typography>\r\n                      <Typography gutterBottom variant=\"subtitle2\" title={message}>{compressionStr(message, 60)}</Typography>\r\n                      <Typography gutterBottom variant=\"subtitle1\">{likes.length} people likes this post</Typography>\r\n                      <img className={classes.img} src={selectedFile} />\r\n                    </div>\r\n                  )\r\n                ))\r\n              }\r\n            </div>\r\n          </div>\r\n        )\r\n      }\r\n    </Paper>\r\n  );\r\n};\r\n\r\nexport default PostDetail;\r\n","import React from 'react';\r\nimport { Container } from '@material-ui/core';\r\nimport { BrowserRouter, Switch, Route, Redirect } from 'react-router-dom';\r\n\r\nimport Navbar from './components/Navbar/Navbar';\r\nimport Home from './components/Home/Home';\r\nimport Authorize from './components/Authorize/Authorize';\r\nimport PostDetail from './components/PostDetail/PostDetail';\r\n\r\nconst App = () => {\r\n  const userInfo = localStorage.getItem('userInfo');\r\n  \r\n  return (\r\n    <BrowserRouter>\r\n      <Container maxWidth=\"xl\">\r\n        <Navbar />\r\n        <Switch>\r\n          <Route path=\"/OursAlbum\" exact component={() => <Redirect to=\"/OursAlbum/posts\" />} />\r\n          <Route path=\"/OursAlbum/posts\" exact component={Home} />\r\n          <Route path=\"/OursAlbum/posts/:id\" exact component={PostDetail} />\r\n          <Route path=\"/OursAlbum/login\" exact component={() => (!userInfo ? <Authorize /> : <Redirect to=\"/OursAlbum/posts\" />)} />\r\n          <Route path=\"/OursAlbum/login/:info\" exact component={() => (!userInfo ? <Authorize /> : <Redirect to=\"/OursAlbum/posts\" />)} />\r\n        </Switch>\r\n      </Container>\r\n    </BrowserRouter>\r\n  );\r\n};\r\n\r\nexport default App;","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport thunk from 'redux-thunk';\r\nimport { reducers } from './reducers';\r\nimport { Provider } from 'react-redux';\r\nimport { createStore, applyMiddleware, compose } from 'redux';\r\n\r\nimport App from './App';\r\n\r\nimport './index.css';\r\n\r\nconst store = createStore(reducers, compose(applyMiddleware(thunk)));\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);"],"sourceRoot":""}